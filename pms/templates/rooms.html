{% extends "main.html"%}

{% block content %}
<h1>Habitaciones del hotel</h1>
<nav>
    <form class="my_filter" id="my_form_filter_rooms" method="post">
        {% csrf_token %}
        {{ filter_form.as_p }}
    </form>
</nav>
{% for room in rooms %}
<div class="row card mt-3 mb-3 hover-card bg-tr-250">
    <div class="col p-3">
        <div class="">
            {{ room.name }} ({{ room.room_type__name }})
        </div>
        <div>
            <a href="{% url 'room_details' pk=room.id %}">Ver detalles</a>
        </div>
    </div>
</div>
{% endfor %}
<script>
    const form = document.getElementById("my_form_filter_rooms");
    const name = document.getElementById("id_name");
    const typeOfRoom = document.getElementById("id_room_type");

    // Set focus on name input
    name.focus();
    // Set cursor at the end of the input
    name.setSelectionRange(name.value.length, name.value.length);

    // Submit form when user types
    name.addEventListener("input", () => {
        form.submit();
    });
    typeOfRoom.addEventListener("input", () => {
        form.submit();
    });
</script>
{% endblock content%}
